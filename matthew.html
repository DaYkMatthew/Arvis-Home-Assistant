<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>ARVIS - Matthew</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { user-select: none; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    body { margin: 0; background: #000; color: #fff; overflow-x: hidden; }
    .glass { background: rgba(17, 25, 40, 0.75); backdrop-filter: blur(16px) saturate(180%); border: 1px solid rgba(255, 255, 255, 0.125); }
    @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-in { animation: slideIn 0.4s ease-out; }
    .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5); }
    button:active { transform: scale(0.98); }
    .skeleton { background: linear-gradient(90deg, #1f2937 25%, #374151 50%, #1f2937 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
    @keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    .switch { position: relative; width: 60px; height: 34px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #4b5563; transition: 0.4s; border-radius: 34px; }
    .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: 0.3s; border-radius: 50%; }
    input:checked + .slider { background-color: #10b981; }
    input:checked + .slider:before { transform: translateX(26px); }
  </style>
</head>
<body>
  <div class="min-h-screen p-4 slide-in">
    <div class="flex justify-between items-center mb-6 pt-4">
      <div><h1 class="text-3xl font-light text-white">ARVIS</h1><p class="text-gray-400 text-sm">Matthew (Admin)</p></div>
      <button onclick="logout()" class="p-3 rounded-full glass hover-lift"><svg class="w-6 h-6 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/></svg></button>
    </div>

    <div class="mb-4 p-5 rounded-2xl glass hover-lift">
      <div id="time" class="text-5xl font-light mb-2"><div class="skeleton h-14 w-32 rounded"></div></div>
      <div id="date" class="text-xl text-gray-400 mb-3"><div class="skeleton h-6 w-48 rounded"></div></div>
      <div id="weather" class="text-2xl text-blue-400 mb-3"><div class="skeleton h-8 w-40 rounded"></div></div>
      <div class="flex gap-4 text-sm flex-wrap">
        <div class="flex items-center gap-2"><div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div><span class="text-gray-400">Online</span></div>
        <div class="text-gray-400" id="local-ip"><div class="skeleton h-4 w-32 rounded inline-block"></div></div>
        <div class="text-gray-400">WiFi: Connected</div>
      </div>
    </div>

    <div class="mb-4 p-4 rounded-2xl glass hover-lift">
      <p id="quote" class="text-base text-gray-300 italic mb-2"><div class="skeleton h-4 w-full rounded mb-2"></div><div class="skeleton h-4 w-3/4 rounded"></div></p>
      <p id="author" class="text-sm text-gray-500">—</p>
    </div>

    <!-- Lights -->
    <div class="mb-4 p-4 rounded-2xl glass hover-lift">
      <h2 class="text-lg font-light mb-3">Lights</h2>
      <div class="flex justify-between items-center p-3 rounded-xl glass mb-2">
        <span>Room Light</span>
        <label class="switch">
          <input type="checkbox" id="roomLight" onchange="toggleLight('room')">
          <span class="slider"></span>
        </label>
      </div>
      <div class="flex justify-between items-center p-3 rounded-xl glass">
        <span>LED Light</span>
        <label class="switch">
          <input type="checkbox" id="ledLight" onchange="toggleLight('led')">
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <!-- Main Navigation -->
    <div class="grid grid-cols-2 gap-4 mb-4">
      <a href="matthew-tv.html" class="p-5 rounded-2xl glass hover-lift text-left" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2));">
        <svg class="w-10 h-10 mb-2 text-blue-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="7" width="20" height="15" rx="2" ry="2"/>
          <polyline points="17 2 12 7 7 2"/>
        </svg>
        <div class="text-lg">TV & Media</div>
        <div class="text-sm text-gray-400">Control entertainment</div>
      </a>

      <a href="matthew-pc.html" class="p-5 rounded-2xl glass hover-lift text-left" style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.2));">
        <svg class="w-10 h-10 mb-2 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
          <line x1="8" y1="21" x2="16" y2="21"/>
          <line x1="12" y1="17" x2="12" y2="21"/>
        </svg>
        <div class="text-lg">PC Controls</div>
        <div class="text-sm text-gray-400">Sleep, lock, shutdown</div>
      </a>
    </div>
  </div>

  <script>
    let inactivityTimer;
    function resetInactivityTimer() { clearTimeout(inactivityTimer); inactivityTimer = setTimeout(() => logout(), 5 * 60 * 1000); }
    document.addEventListener('click', resetInactivityTimer); document.addEventListener('touchstart', resetInactivityTimer); resetInactivityTimer();

    function updateTime() { const now = new Date(); document.getElementById('time').innerHTML = now.toLocaleTimeString('en-US', {hour: 'numeric', minute: '2-digit', hour12: true}); document.getElementById('date').innerHTML = now.toLocaleDateString('en-US', {weekday: 'long', month: 'long', day: 'numeric'}); }
    setInterval(updateTime, 1000); updateTime();

    function getLocalIP() { fetch('https://api.ipify.org?format=json').then(res => res.json()).then(data => { document.getElementById('local-ip').innerHTML = `IP: ${data.ip}`; }).catch(() => { document.getElementById('local-ip').innerHTML = 'IP: Unavailable'; }); }
    getLocalIP();

    async function fetchWeather() { try { let lat = 37.3382, lon = -121.8863; if ('geolocation' in navigator) { const pos = await new Promise((resolve, reject) => { navigator.geolocation.getCurrentPosition(resolve, reject); }); lat = pos.coords.latitude; lon = pos.coords.longitude; } const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&temperature_unit=fahrenheit`); const data = await res.json(); const temp = Math.round(data.current_weather.temperature); const condition = data.current_weather.weathercode === 0 ? 'Clear' : data.current_weather.weathercode <= 3 ? 'Cloudy' : 'Rainy'; document.getElementById('weather').innerHTML = `${temp}°F - ${condition}`; } catch { document.getElementById('weather').innerHTML = 'Weather unavailable'; } }
    fetchWeather();

    async function fetchQuote() { try { const res = await fetch('https://api.quotable.io/quotes/random?maxLength=100'); const data = await res.json(); if (data && data[0]) { document.getElementById('quote').innerHTML = `"${data[0].content}"`; document.getElementById('author').innerHTML = `— ${data[0].author}`; } } catch { document.getElementById('quote').innerHTML = '"The only way to do great work is to love what you do."'; document.getElementById('author').innerHTML = '— Steve Jobs'; } }
    fetchQuote();

    // Light control with VoiceMonkey
    const VOICEMONKEY_TOKEN = 'a39d2a6a59188f40be7fd47dcc8ada77_ef9bba4c4a30724315c537c97027b0fc';
    
    window.addEventListener('load', () => {
      const roomState = localStorage.getItem('roomLight') === 'true';
      const ledState = localStorage.getItem('ledLight') === 'true';
      document.getElementById('roomLight').checked = roomState;
      document.getElementById('ledLight').checked = ledState;
    });

    async function toggleLight(type) {
      const checkbox = document.getElementById(type === 'room' ? 'roomLight' : 'ledLight');
      const isOn = checkbox.checked;
      
      const devices = {
        room: { on: 'switchon', off: 'switchoff' },
        led: { on: 'ledon', off: 'ledoff' }
      };
      
      const device = isOn ? devices[type].on : devices[type].off;
      
      try {
        await fetch(`https://api-v2.voicemonkey.io/trigger?token=${VOICEMONKEY_TOKEN}&device=${device}`, {
          method: 'GET',
          mode: 'no-cors'
        });
        localStorage.setItem(type === 'room' ? 'roomLight' : 'ledLight', isOn);
      } catch (error) {
        console.error('Failed to toggle light:', error);
        checkbox.checked = !isOn;
      }
    }

    function logout() { sessionStorage.clear(); window.location.href = 'index.html'; }
  </script>
</body>
</html>
